<!DOCTYPE html>
<html>
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120382669-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-120382669-1');
    </script>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-— generic unfurl tags -->
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:domain" value="templates.accordproject.org" />
    <meta name="twitter:label1" value="Apache 2.0 Licensed" />
    <meta name="twitter:data1" value="on GitHub.com" />
    <meta name="twitter:label2" value="Contribute" />
    <meta name="twitter:data2" value="at AccordProject.org" />

    
<!-— facebook open graph tags -->
<meta property="og:url" content="volumediscount@0.1.0.html" />
<meta property="og:title" content="volumediscount@0.1.0" />
<meta property="og:description" content="A sample volume discount clause." />
<meta property="og:image" content="http://www.plantuml.com/plantuml/svg/dPBHJiCm34NV-nL-1B7b2wPgrVO5qyHxI4qRbCR5Ta0LyE-4Tfk4g8JQjzZErVMvoLxKigOk52vO4I1kZ7MEkEwPNj2fUQEGEgozE4fHpUDO7Yybx7PmLsqQHeptK9RmKG300nmfFGM4Py-Ya-9NNz1Hh6S6e-1aTUxwdxQsdgVkLx5qx-tsivo1TTuXaybsoZRNrJWz19i4roLqmjU4CWLrtWmO0htF91LHgnYJ3OVMSeENQ1PpNTrkUEtG8mUi6-HCrVKa-I23A7Rcp3PAflGKrx99Jr7mFxYhVDrRtLmMG-qnrZzV-ni0" />

<!-— twitter card tags additive with the og: tags -->
<meta name="twitter:title" value="volumediscount@0.1.0" />
<meta name="twitter:description" value="A sample volume discount clause." />
<meta name="twitter:image" content="http://www.plantuml.com/plantuml/svg/dPBHJiCm34NV-nL-1B7b2wPgrVO5qyHxI4qRbCR5Ta0LyE-4Tfk4g8JQjzZErVMvoLxKigOk52vO4I1kZ7MEkEwPNj2fUQEGEgozE4fHpUDO7Yybx7PmLsqQHeptK9RmKG300nmfFGM4Py-Ya-9NNz1Hh6S6e-1aTUxwdxQsdgVkLx5qx-tsivo1TTuXaybsoZRNrJWz19i4roLqmjU4CWLrtWmO0htF91LHgnYJ3OVMSeENQ1PpNTrkUEtG8mUi6-HCrVKa-I23A7Rcp3PAflGKrx99Jr7mFxYhVDrRtLmMG-qnrZzV-ni0" />
<meta name="twitter:url" value="volumediscount@0.1.0.html" />


    <title>Accord Project Template Library</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    <a href="https://github.com/accordproject/cicero-template-library">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
            alt="Fork me on GitHub">
    </a>
    <section class="section">
        <div class="container">
            <a href="/">
                <img src="/accord_logo.png" />
            </a>
        </div>
    </section>

    
    <section class="section">
        <div class="container">
            <h1 class="title">
                Template volumediscount@0.1.0
            </h1>
            <p class="subtitle">
                A sample volume discount clause.
            </p>

            <h2 class="title is-2">Usage</h2>
            <div class="content">
                <p>
                <h1 id="volumediscount">Volume Discount</h1>
<p>This is a smart legal clause that conforms to the <a href="https://docs.google.com/document/d/1UacA_r2KGcBA2D4voDgGE8jqid-Uh4Dt09AE-shBKR0">Accord Protocol Template Specification</a>, the protocol is managed by the open-source community of the <a href="https://accordproject.org">Accord Project</a>. The clause can be parsed and executed by the <a href="https://github.com/accordproject/cicero">Cicero</a> engine.</p>
<h2 id="description">Description</h2>
<blockquote>
  <p>A sample volume discount clause.</p>
</blockquote>
<p>This clause contains:</p>
<ul>
<li><em>Sample Clause Text</em> - <a href="sample.txt">sample.txt</a></li>
<li><em>A template</em> - <a href="grammar/template.tem">grammar/template.tem</a></li>
<li><em>A data model</em> - <a href="models/clause.cto">models/clause.cto</a></li>
<li><em>Contact logic</em> (in JavaScript) - <a href="lib/logic.js">logic/logic.js</a></li>
</ul>
<h2 id="runningthisclause">Running this clause</h2>
<h3 id="onyourownmachine">On your own machine</h3>
<ol>
<li><p><a href="https://github.com/accordproject/cicero-template-library/archive/master.zip">Download the Cicero template library</a></p></li>
<li><p>Unzip the library with your favourite tool</p></li>
<li><p>Then from the command-line, change the current directory to the folder containing this README.md file.</p></li>
</ol>
<pre><code>cd volumediscount
</code></pre>
<ol start="4">
<li>With the <a href="https://github.com/accordproject/cicero#installation">Cicero command-line tool</a>:</li>
</ol>
<pre><code>cicero execute --template ./ --sample ./sample.txt --request ./request.json --state ./state.json
</code></pre>
<blockquote>
  <p>Note, all of the command-line flags (like <code>--template</code>) are optional.</p>
</blockquote>
<p>Alternatively you can use the simpler command below if you want to use all of the default files.</p>
<pre><code>cicero execute
</code></pre>
<p>You should see the following output in your terminal:</p>
<pre><code class="bash language-bash">mattmbp:volumediscount matt$ cicero execute
18:33:10 - info: Logging initialized. 2018-05-15T22:33:10.712Z
18:33:11 - info: Using current directory as template folder
18:33:11 - info: Loading a default sample.txt file.
18:33:11 - info: Loading a single default request.json file.
18:33:11 - info: Loading a default state.json file.
18:33:11 - info: CICERO-ENGINE {"request":{"$class":"org.accordproject.volumediscount.VolumeDiscountRequest","netAnnualChargeVolume":0.4,"transactionId":"bd964fa1-042e-46ad-b7c4-9c755205dbf4","timestamp":"2018-05-15T22:33:11.435Z"},"state":{"$class":"org.accordproject.common.ContractState","stateId":"org.accordproject.common.ContractState#1"},"contract":{"$class":"org.accordproject.volumediscount.TemplateModel","firstVolume":1,"secondVolume":10,"firstRate":3,"secondRate":2.9,"thirdRate":2.8},"response":{"$class":"org.accordproject.volumediscount.VolumeDiscountResponse","transactionId":"f2a060e1-792e-40cc-a055-fd0faeb25aa9","timestamp":"2018-05-15T22:33:11.446Z"},"emit":[],"now":"2018-05-15T22:33:11.445Z"}
18:33:11 - info: {"clause":"volumediscount@0.0.6-e6b68c35598afb65ddf51bfc40ada8cb482cb441605eb0285d46e708f8654d58","request":{"$class":"org.accordproject.volumediscount.VolumeDiscountRequest","netAnnualChargeVolume":0.4},"response":{"$class":"org.accordproject.volumediscount.VolumeDiscountResponse","discountRate":3,"transactionId":"f2a060e1-792e-40cc-a055-fd0faeb25aa9","timestamp":"2018-05-15T22:33:11.446Z"},"state":{"$class":"org.accordproject.common.ContractState","stateId":"org.accordproject.common.ContractState#1"},"emit":[]}
</code></pre>
<h3 id="samplepayloaddata">Sample Payload Data</h3>
<p>Request, as in <a href="https://github.com/accordproject/cicero-template-library/blob/master/perishable-goods/request.json">request.json</a></p>
<pre><code class="json language-json">{
    "$class": "org.accordproject.volumediscount.VolumeDiscountRequest",
    "netAnnualChargeVolume": 0.4
}
</code></pre>
<p>For the request above, you should see the following response:</p>
<pre><code class="json language-json">{
    "$class":"org.accordproject.volumediscount.VolumeDiscountResponse",
    "discountRate":3,
    "transactionId":"5f448219-851a-4b10-8fb9-14f979951ebd",
    "timestamp":"2018-02-18T11:36:40.353Z"
}
</code></pre>
<h2 id="testingthisclause">Testing this clause</h2>
<p>This clause comes with an automated test that ensures that it executes correctly under different conditions. To test the clause, complete the following steps.</p>
<p>You need npm and node to test a clause. You can download both from <a href="https://nodejs.org/">here</a>.</p>
<blockquote>
  <p>This clause was tested with Node v8.9.3 and NPM v5.6.0</p>
</blockquote>
<p>From the <code>volumediscount</code> directory.</p>
<ol>
<li>Install all of the dependencies.</li>
</ol>
<pre><code>npm install
</code></pre>
<ol start="2">
<li>Run the tests</li>
</ol>
<pre><code>npm test
</code></pre>
<p>If successful, you should see the following output</p>
<pre><code>mattmbp:volumediscount matt$ npm test

&gt; volumediscount@0.0.6 test /Users/matt/dev/mttrbrts/cicero-template-library/volumediscount
&gt; mocha

11:37:53 - info: Logging initialized. 2018-02-18T11:37:53.706Z


  Logic
    #VolumeDiscount
...
      ✓ should execute a smart clause


  1 passing (326ms)
</code></pre>
<blockquote>
  <p>Output above is abbreviated for clarity at <code>...</code></p>
</blockquote>
                </p>
            </div>
            <p>
                <a href="./archives/volumediscount@0.1.0.cta" class="button is-rounded">Download Archive</a>
            </p>

            <img src="http://www.plantuml.com/plantuml/svg/dPBHJiCm34NV-nL-1B7b2wPgrVO5qyHxI4qRbCR5Ta0LyE-4Tfk4g8JQjzZErVMvoLxKigOk52vO4I1kZ7MEkEwPNj2fUQEGEgozE4fHpUDO7Yybx7PmLsqQHeptK9RmKG300nmfFGM4Py-Ya-9NNz1Hh6S6e-1aTUxwdxQsdgVkLx5qx-tsivo1TTuXaybsoZRNrJWz19i4roLqmjU4CWLrtWmO0htF91LHgnYJ3OVMSeENQ1PpNTrkUEtG8mUi6-HCrVKa-I23A7Rcp3PAflGKrx99Jr7mFxYhVDrRtLmMG-qnrZzV-ni0" />

            <h2 class="title is-2">Model Dependencies</h2>
            <div class="content">
                <ul>
                
                <li><a href="https://models.accordproject.org/cicero/contract.html">org.accordproject.cicero.contract.*</a></li>
                
                <li><a href="https://models.accordproject.org/cicero/runtime.html">org.accordproject.cicero.runtime.*</a></li>
                
                </ul>
            </div>

            <h2 class="title is-2">Sample</h2>
            <div class="content">
                <pre>
Volume-Based Card Acceptance Agreement [Abbreviated]

This Agreement is by and between Card, Inc., a New York corporation, and you, the Merchant. By accepting the Card, you agree to be bound by the Agreement. 
Discount means an amount that we charge you for accepting the Card, which amount is: 
(i) a percentage (Discount Rate) of the face amount of the Charge that you submit, or a flat per-
Transaction fee, or a combination of both; and/or 
(ii) a Monthly Flat Fee (if you meet our requirements).

Transaction Processing and Payments. Our Card acceptance, processing, and payment requirements are set forth in the Merchant Regulations. Some requirements are summarized here for ease of reference, but do not supersede the provisions in the Merchant Regulations.
Payment for Charges. We will pay you, through our agent, according to your payment plan in US dollars for the face amount of Charges submitted from your Establishments less all applicable deductions, rejections, and withholdings, which include: 
(i) the Discount, 
(ii) any amounts you owe us or our Affiliates, 
(iii) any amounts for which we have Chargebacks and 
(iv) any Credits you submit. Your initial Discount is indicated in the Agreement or otherwise provided to you in writing by us. In addition to your Discount we may charge you additional fees and assessments, as listed in the Merchant Regulations or as otherwise provided to you in writing by us. We may adjust any of these amounts and may change any other amount we charge you for accepting the Card.

SETTLEMENT
a) Settlement Amount. Our agent will pay you according to your payment plan, as described below, in US dollars for the face amount of Charges submitted from your Establishments less all applicable deductions, rejections, and withholdings, which include: 
    (i) the Discount, 
    (ii) any amounts you owe us or our Affiliates, 
    (iii) any amounts for which we have Chargebacks, and (iv) any Credits you submit. Our agent will subtract the full amount of all applicable deductions, rejections, and withholdings, from this payment to you (or debit your Bank Account), but if it cannot, then you must pay it promptly upon demand.
b) Discount. The Discount is determined according to the following table:

| Annual Dollar Volume      | Discount             |
| Less than $1 million      | 3.00%                |
| $1 million to $10 million | 2.90%                |
| Greater than $10 million  | 2.80%                |

_______________________					_____________________
 Card, Inc.								Merchant
                </pre>
            </div>

            This clause contains:
- *Some sample Clause Text* - [sample.txt](sample.txt)
- *A template* - [grammar/template.tem](grammar/template.tem)
- *A data model* - [models/model.cto](models/model.cto)
- *Contact logic* (in JavaScript) - [logic/logic.js](lib/logic.js)

## Running this clause

### On your own machine

1. [Download the Cicero template library](https://github.com/accordproject/cicero-template-library/archive/master.zip)

2. Unzip the library with your favourite tool

3. Then from the command-line, change the current directory to the folder containing this README.md file.
```
cd acceptance-of-delivery
```
4. With the [Cicero command-line tool](https://github.com/accordproject/cicero#installation):
```
cicero execute --template ./ --sample ./sample.txt --request ./request.json --state ./state.json
```
> Note, all of the command-line flags (like `--template`) are optional.

Alternatively you can use the simpler command below if you want to use all of the default files.
```
cicero execute
```

You should see the following output in your terminal:
```bash
mattmbp:acceptance-of-delivery matt$ cicero execute
18:22:38 - info: Logging initialized. 2018-05-15T22:22:38.131Z
18:22:38 - info: Using current directory as template folder
18:22:38 - info: Loading a default sample.txt file.
18:22:38 - info: Loading a single default request.json file.
18:22:38 - info: Loading a default state.json file.
18:22:38 - info: {"clause":"acceptance-of-delivery@0.0.3-e407ff0a315c5b1c267677edbda49a32d4e9ef890ad21a3e40b3bc110d06c88c","request":{"$class":"org.accordproject.acceptanceofdelivery.InspectDeliverable","deliverableReceivedAt":"January 1, 2018 16:34:00","inspectionPassed":true},"response":{"$class":"org.accordproject.acceptanceofdelivery.InspectionResponse","status":"OUTSIDE_INSPECTION_PERIOD","shipper":"resource:org.hyperledger.composer.system.Participant#Party%20A","receiver":"resource:org.hyperledger.composer.system.Participant#Party%20B","transactionId":"faacef8f-c0b2-4d9f-911f-007aa98a1c1d","timestamp":"2018-05-15T22:22:38.869Z"},"state":{"$class":"org.accordproject.common.ContractState","stateId":"org.accordproject.common.ContractState#1"},"emit":[]}
```

### Sample Payload Data


Request, as in [request.json](https://github.com/accordproject/cicero-template-library/blob/master/acceptance-of-delivery/request.json)
```json
{
    "$class":"org.accordproject.acceptanceofdelivery.InspectDeliverable",
    "deliverableReceivedAt": "January 1, 2018 16:34:00",
    "inspectionPassed": true
}
```

For the request above, you should see the following response:
```json
{
    "$class":"org.accordproject.acceptanceofdelivery.InspectionResponse",
    "status":"OUTSIDE_INSPECTION_PERIOD",
    "shipper":"resource:org.hyperledger.composer.system.Participant#Party%20A",
    "receiver":"resource:org.hyperledger.composer.system.Participant#Party%20B",
    "transactionId":"57df30ca-3755-457b-9176-5fae50dd3283",
    "timestamp":"2018-02-17T21:49:40.206Z"
}
```


## Testing this clause

This clause comes with an automated test that ensures that it executes correctly under different conditions. To test the clause, complete the following steps.

You need npm and node to test a clause. You can download both from [here](https://nodejs.org/).

> This clause was tested with Node v8.9.3 and NPM v5.6.0

From the `acceptance-of-delivery` directory.

1. Install all of the dependencies.
```
npm install
```

2. Run the tests
```
npm test
```
If successful, you should see the following output
```
mattmbp:acceptance-of-delivery matt$ npm test

> acceptance-of-delivery@0.0.3 test /Users/matt/dev/accordproject/cicero-template-library/acceptance-of-delivery
> mocha

21:57:31 - info: Logging initialized. 2018-02-17T21:57:31.074Z


  Logic
    #InspectDeliverable
      ✓ passed inspection within time limit
      ✓ failed inspection within time limit
      ✓ inspection outside time limit
      ✓ inspection before delivable should throw


  4 passing (458ms)

```
        </div>
    </section>


    <footer class="footer">
        <div class="container">
            <div class="content has-text-centered">
                <p>
                    Copyright 2018 <a href="https://accordproject.org">Accord Project</a>. Licensed under the
                    <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache-2.0</a> Open Source software license.
                </p>
            </div>
        </div>
    </footer>
</body>

</html>